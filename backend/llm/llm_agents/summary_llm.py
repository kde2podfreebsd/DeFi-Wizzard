from backend.llm.llm_agents.base_llm import ChatGPTService as BaseChatGPTService

class ChatGPTSummaryNewsService(BaseChatGPTService):
    async def generate_news_tags(self, news: str):
        prompt = ("–ü—Ä–æ—á–∏—Ç–∞–π –Ω–æ–≤–æ—Å—Ç—å –∏ –≤–µ—Ä–Ω–∏ —Ç–µ–≥–∏ –Ω–æ–≤–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä: #crypto#btc#inflation."
                  " –ù–µ –ø–∏—à–∏ –Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ, —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫—É –∏–∑ —Ç–µ–≥–æ–≤"
                  "–ï—Å–ª–∏ –Ω–æ–≤–æ—Å—Ç—å –Ω–µ –ø—Ä–æ de-fi, —Ñ–∏–Ω–∞–Ω—Å—ã, –∫—Ä–∏–ø—Ç—É, –ø–æ–ª–∏—Ç–∏–∫—É, –∏–ª–∏ —Å–º–µ–∂–Ω—ã–µ —Å —ç—Ç–∏–º –Ω–æ–≤–æ—Å—Ç–∏ –≤–º–µ—Å—Ç–æ —Ç–µ–≥–æ–≤ –≤–µ—Ä–Ω–∏ false\n–ù–æ–≤–æ—Å—Ç—å: ")
        prompt += news
        tags = await self.make_request("news-tag", prompt)
        if tags == "false":
            return False

        tags_list = tags.split('#')
        return tags_list[1:]

    async def generate_news_summary(self, news_text: str) -> str:
        prompt = ("–¢—ã ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫ DeFi, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –≤ —É–º–Ω–æ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–µ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤."
                  "–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∏ —Å–æ–∑–¥–∞—Ç—å –∫—Ä–∞—Ç–∫–æ–µ, –Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏."
                  "–ù–µ –¥–æ–±–∞–≤–ª—è–π –ª–∏—à–Ω–µ–π '–≤–æ–¥—ã' –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –æ–±—â–∏—Ö —Ñ—Ä–∞–∑."
                  "–†–µ–∑—é–º–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–º—É —Ä–µ—à–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ DeFi-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."
                  '''üì∞ –ó–∞–≥–æ–ª–æ–≤–æ–∫ (–≤—ã–¥–µ–ª–∏ —Å—É—Ç—å –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
[–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ: "Uniswap –∑–∞–ø—É—Å–∫–∞–µ—Ç v4", "Arbitrum –ø–æ–ª—É—á–∏–ª 100M USDC", –∏ —Ç.–ø.]
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –Ω–æ–≤–æ—Å—Ç–∏, –Ω–∞–π–¥–∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏, –¥–∞–π —Ç–æ–Ω–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É, –ø–æ–ø—Ä–æ–±—É–π –Ω–∞–π—Ç–∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏ –≤ –Ω–æ–≤–æ—Å—Ç—è—Ö. 
–°–¥–µ–ª–∞–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –≤—ã–≤–æ–¥—ã
üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–∫—Ç—ã:
- –ö—Ä–∞—Ç–∫–æ –∏–∑–ª–æ–∂–∏ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã –∏ —Ü–∏—Ñ—Ä—ã –∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π.
- –£–∫–∞–∂–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, —Ç–æ–∫–µ–Ω–æ–≤, –±–ª–æ–∫—á–µ–π–Ω–æ–≤, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π.
- –ï—Å–ª–∏ –µ—Å—Ç—å ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç—ã, —Å—É–º–º—ã, –∞–¥—Ä–µ—Å–∞, —Å—Ä–æ–∫–∏.
üìà –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ:
- –û–ø–∏—à–∏, –∫–∞–∫–∏–µ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–ª–∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã.
- –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∞—Ä–±–∏—Ç—Ä–∞–∂–∞, —Å—Ç–µ–π–∫–∏–Ω–≥–∞, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∏ —Ç.–ø.
üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
- –°—Ç–æ–∏—Ç –ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º?
- –°–ª–µ–¥—É–µ—Ç –ª–∏ –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º, –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑-–∑–∞ –≤–∑–ª–æ–º–∞, –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏–ª–∏ FUD?
- –ï—Å—Ç—å –ª–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–≤–µ—Å—Ç–∏ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å, –∑–∞—Ñ–∞—Ä–º–∏—Ç—å —Ç–æ–∫–µ–Ω—ã, –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏?
''')
        prompt += news_text
        summary = await self.make_request("news-tag", prompt)
        return summary
